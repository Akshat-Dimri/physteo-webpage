<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physteo - NIT Hamirpur</title>
    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-body: #ffffff;
            --dot-color: #000000;
            --container-bg: rgba(0, 0, 0, 0.92);
            --text-color: #ffffff;
            --border-color: #ffffff;
            --accent-color: #000000;
            
            --font-main: 'Helvetica', 'Arial', sans-serif;
            --font-mono: 'Courier New', Courier, monospace;
        }

        /* --- INVERTED MODE --- */
        body.inverted {
            --bg-body: #000000;
            --dot-color: #ffffff;
            --container-bg: rgba(255, 255, 255, 0.92);
            --text-color: #000000;
            --border-color: #000000;
            --accent-color: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-body);
            background-image: radial-gradient(circle, var(--dot-color) 85%, transparent 86%);
            background-size: 4px 4px;
            color: var(--text-color);
            font-family: var(--font-main);
            line-height: 1.5;
            overflow-x: hidden;
            transition: background-color 0.5s ease;
        }

        /* --- PRELOADER STYLES --- */
        #preloader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            color: #fff;
            z-index: 9999;
            font-family: var(--font-mono);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
            transition: opacity 0.8s ease;
        }

        .terminal-logs p {
            margin-bottom: 10px;
            opacity: 0;
            animation: fadeInLog 0.5s forwards;
            font-size: 0.9rem;
        }
        /* Stagger the log appearance */
        .terminal-logs p:nth-child(1) { animation-delay: 0.2s; }
        .terminal-logs p:nth-child(2) { animation-delay: 1.0s; }
        .terminal-logs p:nth-child(3) { animation-delay: 1.8s; }

        .loading-bar {
            font-size: 1rem;
            opacity: 0.8;
        }

        @keyframes fadeInLog { to { opacity: 1; } }

        /* --- DOPPLER EFFECT --- */
        body.doppler-red .grid-container {
            text-shadow: 2px 0 0 rgba(255, 50, 50, 0.8);
            transform: skewX(-0.5deg);
        }
        body.doppler-blue .grid-container {
            text-shadow: -2px 0 0 rgba(50, 50, 255, 0.8);
            transform: skewX(0.5deg);
        }

        /* --- GLOBAL LAYOUT --- */
        .grid-container {
            max-width: 1400px;
            margin: 0 auto;
            border-left: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            background-color: var(--container-bg);
            backdrop-filter: blur(2px);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* Start invisible, fade in after loader */
            opacity: 0; 
            transition: opacity 1s ease, background-color 0.5s ease, border-color 0.5s ease, color 0.5s ease, text-shadow 0.2s ease, transform 0.2s ease;
        }

        /* --- HEADER --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            border-bottom: 1px solid var(--border-color);
            background: var(--accent-color);
            position: relative;
            z-index: 10;
            transition: background 0.5s ease;
        }
        
        body:not(.inverted) header { color: white; }
        body.inverted header { background: #ffffff; border-bottom: 1px solid #000; }
        body.inverted header .logo, body.inverted nav button { color: #000; }

        .logo {
            padding: 0 20px;
            font-size: 1.2rem;
            font-weight: bold;
            letter-spacing: 1px;
            height: 100%;
            display: flex;
            align-items: center;
            border-right: 1px solid var(--border-color);
            cursor: pointer;
        }

        nav ul { display: flex; list-style: none; height: 100%; }
        nav li { height: 100%; border-left: 1px solid var(--border-color); }
        
        nav button {
            background: none;
            border: none;
            color: var(--text-color);
            padding: 0 25px;
            height: 100%;
            display: flex;
            align-items: center;
            font-family: var(--font-mono);
            text-transform: uppercase;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.3s, color 0.3s;
        }

        nav button:hover { 
            background: var(--border-color); 
            color: var(--accent-color); 
        }

        /* --- DYNAMIC VIEWPORT --- */
        #dynamic-view {
            flex: 1;
            display: grid;
            transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        #dynamic-view.view-home { grid-template-columns: 3fr 1fr; }
        #dynamic-view.view-events { grid-template-columns: 1fr 1fr 1fr; }
        #dynamic-view.view-team { 
            grid-template-columns: 1fr 1fr 1fr; 
            grid-template-rows: 1fr 1fr;
        }

        /* --- CONTENT PANELS --- */
        .content-panel {
            padding: 30px;
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: relative;
        }
        
        .view-events .content-panel:nth-child(3) { border-right: none; }
        .view-team .content-panel:nth-child(3n) { border-right: none; }
        .view-team .content-panel:nth-child(-n+3) { border-bottom: 1px solid var(--border-color); }

        .visible { opacity: 1; }

        h1, h2, h3 { font-family: var(--font-mono); text-transform: uppercase; font-weight: normal; }
        
        .hero-title-wrapper { min-height: 16rem; margin-bottom: 20px; }
        .hero-title { font-size: 4rem; line-height: 1.1; letter-spacing: -2px; }
        
        .big-char { font-size: 1.5em; font-weight: normal; color: var(--text-color); line-height: 1; }
        .small-text { font-size: 0.7em; opacity: 0.9; }
        
        .cursor { 
            display: inline-block; 
            background-color: var(--text-color); 
            width: 5px; 
            height: 1em; 
            margin-left: 5px; 
            animation: blink 1s infinite; 
            vertical-align: baseline;
        }

        .event-card, .team-card { height: 100%; display: flex; flex-direction: column; justify-content: space-between; }
        .event-number { font-family: var(--font-mono); font-size: 3rem; opacity: 0.2; margin-bottom: 20px; }
        
        .scroll-arrow {
            position: absolute; right: 20px; bottom: 20px;
            width: 50px; height: 50px; border: 1px solid var(--border-color); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; background: var(--accent-color); color: var(--text-color); z-index: 50;
            font-family: var(--font-mono); font-weight: bold;
            transition: all 0.3s;
        }
        
        body:not(.inverted) .scroll-arrow { background: black; color: white; border-color: white; }
        body:not(.inverted) .scroll-arrow:hover { background: white; color: black; }
        body.inverted .scroll-arrow { background: white; color: black; border-color: black; }
        body.inverted .scroll-arrow:hover { background: black; color: white; }
        .scroll-arrow:active { transform: scale(0.9); }

        .date { font-family: var(--font-mono); font-size: 0.8rem; opacity: 0.7; margin-bottom: 5px; display: block; }
        .role { font-family: var(--font-mono); font-size: 0.75rem; opacity: 0.5; margin-top: 5px; display: block; border-top: 1px solid var(--text-color); padding-top:10px;}
        .section-header { 
            padding: 15px 20px; 
            border-bottom: 1px solid var(--border-color); 
            background: var(--accent-color); 
            color: var(--text-color);
            font-family: var(--font-mono); 
            font-size: 0.9rem; 
        }
        body.inverted .section-header { background: #fff; color: #000; }

        @keyframes blink { 50% { opacity: 0; } }

        /* --- WAVE & TOOLTIP --- */
        .wave-container {
            height: 60px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            background: var(--accent-color);
            position: relative;
            cursor: crosshair;
        }
        body.inverted .wave-container { background: #fff; }

        .wave-svg { width: 100%; height: 100%; }
        .wave-path {
            fill: none;
            stroke: var(--text-color);
            stroke-width: 2;
            vector-effect: non-scaling-stroke;
        }

        .wave-tooltip {
            position: absolute;
            background: var(--container-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 4px 8px;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            pointer-events: none;
            white-space: nowrap;
            display: none;
            z-index: 100;
            box-shadow: 0 0 10px rgba(125,125,125,0.2);
        }

        @media (max-width: 768px) {
            #dynamic-view.view-home, #dynamic-view.view-events, #dynamic-view.view-team { 
                grid-template-columns: 1fr; grid-template-rows: auto; display: block; 
            }
            .hero-title { font-size: 2rem; }
            .content-panel { border-right: none !important; border-bottom: 1px solid var(--border-color) !important; }
            .scroll-arrow { position: fixed; bottom: 80px; right: 20px; }
            .wave-container { display: none; }
        }
    </style>
</head>
<body>

    <div id="preloader">
        <div class="terminal-logs">
            <p>> CONFIGURING TERMINAL...</p>
            <p>> TERMINAL EXHIBITS: DOPPLER_SHIFT, SCHRODINGER_GLITCH</p>
            <p>> ENTER 'light' FOR INVERSION</p>
        </div>
        <div class="loading-bar">
            SYSTEM_BOOT: <span id="loader-line"></span>
        </div>
    </div>

    <div class="grid-container" id="main-interface">
        <header>
            <div class="logo" onclick="loadPage('home')">PHYSTEO_NITH</div>
            <nav>
                <ul>
                    <li><button onclick="loadPage('events')">EVENTS</button></li>
                    <li><button onclick="loadPage('team')">TEAM</button></li>
                    <li><button onclick="loadPage('contact')">CONTACT</button></li>
                </ul>
            </nav>
        </header>

        <section id="dynamic-view" class="view-home">
            </section>

        <div class="section-header" id="status-bar">
            // DATA_LOG: SYSTEM_READY
        </div>
    </div>

    <script>
        // --- BOOT SEQUENCE (PRELOADER) ---
        document.addEventListener("DOMContentLoaded", () => {
            const loaderLine = document.getElementById('loader-line');
            const preloader = document.getElementById('preloader');
            const mainInterface = document.getElementById('main-interface');
            
            let loadProgress = "";
            let steps = 0;
            
            // 1. Animate Loading Bar (3 seconds)
            const loadingInterval = setInterval(() => {
                loadProgress += "-";
                loaderLine.innerText = loadProgress;
                steps++;
                
                // 2. Finish Loading
                if(steps > 50) { // 30 steps * 100ms = 3000ms
                    clearInterval(loadingInterval);
                    
                    // Fade out loader
                    preloader.style.opacity = "0";
                    
                    setTimeout(() => {
                        preloader.style.display = "none";
                        
                        // Fade in Main Site
                        mainInterface.style.opacity = "1";
                        
                        // Start Page Logic
                        loadPage('home');
                    }, 800);
                }
            }, 100);
        });

        // --- DATABASE ---
        const eventsDB = [
            [
                { date: "NOV 25", num: "01", title: "SINGULARITY<br>TALK", desc: "// Deep dive into Black Hole Thermodynamics." },
                { date: "DEC 02", num: "02", title: "STARGAZING<br>NIGHT", desc: "// Observation session at the OAT." },
                { date: "TBA", num: "03", title: "QUANTUM<br>WORKSHOP", desc: "// Intro to Q-Computing." }
            ],
            [
                { date: "JAN 15", num: "04", title: "DARK MATTER<br>SYMPOSIUM", desc: "// Investigating the missing mass." },
                { date: "FEB 10", num: "05", title: "ROCKETRY<br>101", desc: "// Propulsion systems basics." },
                { date: "MAR 05", num: "06", title: "STRING<br>THEORY", desc: "// Unifying the fundamental forces." }
            ]
        ];

        const teamDB = [
            [
                { role: "CONVENER", name: "AARAV<br>SHARMA" },
                { role: "CO-CONVENER", name: "ISHITA<br>VERMA" },
                { role: "GEN. SEC", name: "ROHAN<br>MEHTA" },
                { role: "TECH HEAD", name: "KABIR<br>SINGH" },
                { role: "LOGISTICS", name: "NEHA<br>GUPTA" },
                { role: "FINANCE", name: "VIKRAM<br>PATEL" }
            ],
            [
                { role: "EXEC MEMBER", name: "SARA<br>ALI" },
                { role: "EXEC MEMBER", name: "DEV<br>KUMAR" },
                { role: "EXEC MEMBER", name: "PRIYA<br>ROY" },
                { role: "EXEC MEMBER", name: "ARJUN<br>DAS" },
                { role: "EXEC MEMBER", name: "LARA<br>DUTTA" },
                { role: "EXEC MEMBER", name: "OM<br>PRAKASH" }
            ]
        ];

        // --- STATE VARIABLES ---
        let currentEventPage = 0;
        let currentTeamPage = 0;
        
        const viewContainer = document.getElementById('dynamic-view');
        const statusBar = document.getElementById('status-bar');

        // Note: loadPage('home') is now called inside the Preloader logic

        function loadPage(pageName) {
            statusBar.innerText = `// DATA_LOG: LOADING_MODULE_[${pageName.toUpperCase()}]...`;
            
            viewContainer.innerHTML = '';
            viewContainer.className = `view-${pageName}`; 

            setTimeout(() => {
                if (pageName === 'home') {
                    renderHome();
                } 
                else if (pageName === 'events') {
                    currentEventPage = 0;
                    renderEvents(currentEventPage);
                } 
                else if (pageName === 'team') {
                    currentTeamPage = 0;
                    renderTeam(currentTeamPage);
                }
                
                document.querySelectorAll('.content-panel').forEach((panel, i) => {
                    setTimeout(() => panel.classList.add('visible'), i * 100);
                });
                
                statusBar.innerText = `// DATA_LOG: MODULE_[${pageName.toUpperCase()}]_ACTIVE`;
            }, 400);
        }

        // --- RENDERERS ---

        function renderHome() {
            viewContainer.innerHTML = `
                <div class="content-panel" style="justify-content: center;">
                    <p style="font-family: var(--font-mono); margin-bottom: 20px; opacity: 0.8;">[ SYSTEM ONLINE ]</p>
                    <div class="hero-title-wrapper">
                        <h1 class="hero-title" id="home-title"><span class="cursor">&nbsp;</span></h1>
                    </div>
                    <div style="margin-top: auto; padding-top: 20px; border-top: 1px dashed var(--accent-color);">
                        <p style="font-family: var(--font-mono); max-width: 500px; line-height: 1.6;">
                            We are Physteo. The Physics Society of NIT Hamirpur.
                        </p>
                    </div>
                </div>
                
                <div class="content-panel" style="background: rgba(125,125,125,0.05); padding: 0;">
                    
                    <div style="flex: 1; display:flex; flex-direction:column; justify-content:center; padding: 30px;">
                        <span class="date">STATUS</span>
                        <h3>RECRUITING</h3>
                    </div>

                    <div class="wave-container" id="wave-box">
                        <div class="wave-tooltip" id="wave-tooltip"></div>
                        <svg class="wave-svg" viewBox="0 0 300 60" preserveAspectRatio="none">
                            <path class="wave-path" d="M0,30 L300,30">
                                <animate 
                                    attributeName="d" 
                                    values="
                                        M0,30 Q37.5,30 75,30 T150,30 T225,30 T300,30;
                                        M0,30 Q37.5,10 75,30 T150,30 T225,30 T300,30;
                                        M0,30 Q37.5,50 75,30 T150,30 T225,30 T300,30;
                                        M0,30 Q37.5,30 75,30 T150,30 T225,30 T300,30"
                                    dur="6s" 
                                    repeatCount="indefinite"
                                    keyTimes="0; 0.3; 0.6; 1" 
                                    calcMode="spline"
                                    keySplines="0.4 0 0.2 1; 0.4 0 0.2 1; 0.4 0 0.2 1"
                                />
                            </path>
                        </svg>
                    </div>

                    <div style="flex: 1; display:flex; flex-direction:column; justify-content:center; padding: 30px;">
                        <span class="date">LOCATION</span>
                        <h3>OAT ROOF</h3>
                    </div>
                </div>
            `;
            
            // Tooltip Logic
            const waveBox = document.getElementById('wave-box');
            const tooltip = document.getElementById('wave-tooltip');
            if(waveBox && tooltip) {
                waveBox.addEventListener('mousemove', (e) => {
                    const rect = waveBox.getBoundingClientRect();
                    const x = Math.round(e.clientX - rect.left);
                    const yRaw = e.clientY - rect.top;
                    const y = Math.round((30 - yRaw)); 
                    tooltip.style.display = 'block';
                    tooltip.style.left = (e.clientX - rect.left + 15) + 'px'; 
                    tooltip.style.top = (e.clientY - rect.top - 30) + 'px'; 
                    tooltip.innerHTML = `X:${x} <span style="opacity:0.5">|</span> Y:${y > 0 ? '+' : ''}${y}`;
                });
                waveBox.addEventListener('mouseleave', () => {
                    tooltip.style.display = 'none';
                });
            }

            startHomeTyping();
        }

        function renderEvents(pageIndex) {
            const data = eventsDB[pageIndex];
            let html = '';
            
            data.forEach(item => {
                html += `
                    <div class="content-panel">
                        <div class="event-card">
                            <div>
                                <span class="date">${item.date}</span>
                                <div class="event-number">${item.num}</div>
                                <h2 class="type-target">${item.title}</h2>
                            </div>
                            <p style="font-family: monospace; font-size: 0.85rem;">${item.desc}</p>
                        </div>
                    </div>
                `;
            });
            html += `<div class="scroll-arrow" onclick="nextPageEvents()">></div>`;
            viewContainer.innerHTML = html;
            setTimeout(() => {
                document.querySelectorAll('.content-panel').forEach(p => p.classList.add('visible'));
                startGenericTyping();
            }, 50);
        }

        function renderTeam(pageIndex) {
            const data = teamDB[pageIndex];
            let html = '';
            data.forEach(member => {
                html += `
                    <div class="content-panel">
                        <div class="team-card">
                            <span class="date">MEMBER_ID: ${Math.floor(Math.random()*9000)+1000}</span>
                            <div style="margin-top: auto;">
                                <h2 class="type-target schrodinger-target" style="font-size: 1.2rem;">${member.name}</h2>
                                <span class="role">${member.role}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += `<div class="scroll-arrow" onclick="nextPageTeam()">></div>`;
            viewContainer.innerHTML = html;
            setTimeout(() => {
                document.querySelectorAll('.content-panel').forEach(p => p.classList.add('visible'));
                startGenericTyping();
                activateSchrodingerGlitch();
            }, 50);
        }

        // --- HANDLERS ---
        function nextPageEvents() {
            untypeAll(() => {
                currentEventPage++;
                if (currentEventPage >= eventsDB.length) currentEventPage = 0;
                renderEvents(currentEventPage);
            });
        }

        function nextPageTeam() {
            untypeAll(() => {
                currentTeamPage++;
                if (currentTeamPage >= teamDB.length) currentTeamPage = 0;
                renderTeam(currentTeamPage);
            });
        }

        // --- ANIMATIONS ---
        function untypeAll(callback) {
            const targets = document.querySelectorAll('.type-target');
            let completed = 0;
            if(targets.length === 0) { callback(); return; }

            targets.forEach(target => {
                const interval = setInterval(() => {
                    if (target.innerHTML.slice(-1) === '>') {
                        let tagStart = target.innerHTML.lastIndexOf('<');
                        target.innerHTML = target.innerHTML.substring(0, tagStart);
                    } else {
                        target.innerHTML = target.innerHTML.slice(0, -1);
                    }
                    if (target.innerHTML === '') {
                        clearInterval(interval);
                        completed++;
                        if (completed === targets.length) callback();
                    }
                }, 10);
            });
        }

        function startGenericTyping() {
            const targets = document.querySelectorAll('.type-target');
            targets.forEach(target => {
                const text = target.innerHTML;
                target.innerHTML = '';
                let i = 0;
                function typeChar() {
                    if (i < text.length) {
                        if (text.charAt(i) === '<') {
                            let tagEnd = text.indexOf('>', i);
                            target.innerHTML += text.substring(i, tagEnd + 1);
                            i = tagEnd + 1;
                        } else {
                            target.innerHTML += text.charAt(i);
                            i++;
                        }
                        setTimeout(typeChar, 30);
                    }
                }
                typeChar();
            });
        }

        function startHomeTyping() {
            const h1 = document.getElementById('home-title');
            if(!h1) return;
            const cursor = '<span class="cursor">&nbsp;</span>';
            const textSteps = [
                "EXPLORE THE UNSEEN",
                "<span class='big-char'>N</span><span class='small-text'>EXUS FOR</span><br>" + 
                "<span class='big-char'>I</span><span class='small-text'>NNOVATION IN</span><br>" + 
                "<span class='big-char'>T</span><span class='small-text'>ECHNICAL</span><br>" + 
                "<span class='big-char'>H</span><span class='small-text'>YPERGROWTH</span>"
            ];
            let stepIndex = 0;
            let charIndex = 0;
            let isDeleting = false;
            let currentContent = "";

            function loop() {
                if(!document.getElementById('home-title')) return;
                const fullString = textSteps[stepIndex];

                if (isDeleting) {
                    if (currentContent.slice(-1) === '>') {
                        let tagStart = currentContent.lastIndexOf('<');
                        currentContent = currentContent.substring(0, tagStart);
                    } else {
                        currentContent = currentContent.slice(0, -1);
                    }
                } else {
                    if (fullString.charAt(charIndex) === '<') {
                        let tagEnd = fullString.indexOf('>', charIndex);
                        currentContent += fullString.substring(charIndex, tagEnd + 1);
                        charIndex = tagEnd + 1;
                    } else {
                        currentContent += fullString.charAt(charIndex);
                        charIndex++;
                    }
                }
                h1.innerHTML = currentContent + cursor;

                let speed = isDeleting ? 30 : 60;
                if (!isDeleting && charIndex >= fullString.length) {
                    speed = 2500;
                    isDeleting = true;
                } else if (isDeleting && currentContent === '') {
                    isDeleting = false;
                    stepIndex = (stepIndex + 1) % textSteps.length;
                    charIndex = 0;
                    speed = 500;
                }
                setTimeout(loop, speed);
            }
            loop();
        }

        // --- EASTER EGGS ---
        
        function activateSchrodingerGlitch() {
            const targets = document.querySelectorAll('.schrodinger-target');
            const glitchChars = "010101∅±∑√∫≈≠";
            targets.forEach(target => {
                const originalHTML = target.innerHTML;
                target.addEventListener('mouseenter', () => {
                    let iterations = 0;
                    const interval = setInterval(() => {
                        const textLength = target.innerText.length;
                        let glitchText = "";
                        for(let i=0; i<textLength; i++) {
                            glitchText += glitchChars[Math.floor(Math.random() * glitchChars.length)];
                        }
                        target.innerText = glitchText;
                        iterations++;
                        if (iterations > 10) {
                            clearInterval(interval);
                            target.innerHTML = originalHTML;
                        }
                    }, 50);
                });
            });
        }

        let lastScrollY = window.scrollY;
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            const currentScrollY = window.scrollY;
            const body = document.body;
            body.classList.remove('doppler-red', 'doppler-blue');
            if (currentScrollY > lastScrollY) {
                body.classList.add('doppler-red');
            } else if (currentScrollY < lastScrollY) {
                body.classList.add('doppler-blue');
            }
            lastScrollY = currentScrollY;
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                body.classList.remove('doppler-red', 'doppler-blue');
            }, 100);
        });

        let keyBuffer = '';
        document.addEventListener('keydown', (e) => {
            keyBuffer += e.key.toLowerCase();
            if(keyBuffer.length > 10) keyBuffer = keyBuffer.slice(-10);
            if(keyBuffer.endsWith('light')) {
                document.body.classList.toggle('inverted');
                keyBuffer = ''; 
            }
        });

    </script>
</body>
</html>